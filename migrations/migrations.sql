
CREATE TABLE IF NOT EXISTS marker_types(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	marker_type VARCHAR(20) NOT NULL,
	svg MEDIUMTEXT NOT NULL
);
CREATE TABLE IF NOT EXISTS markers(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	type_id INT NOT NULL,
	lat DEC(9,6) NOT NULL,
	lng DEC(9,6) NOT NULL,
	start_date DATETIME,
	end_date DATETIME,
	info VARCHAR(30),
	INDEX mtype_ind (type_id),
	CONSTRAINT fk_mtype FOREIGN KEY (type_id)
	REFERENCES marker_types(id)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);
CREATE TABLE IF NOT EXISTS user_types(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	user_type VARCHAR(10) NOT NULL
);
CREATE TABLE IF NOT EXISTS users(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	user_type_id INT NOT NULL,
	first_name VARCHAR(30) NOT NULL,
	last_name VARCHAR(30) NOT NULL,
	email VARCHAR(50) NOT NULL,
	password VARCHAR(255) NOT NULL,
	phone VARCHAR(15),
	cell VARCHAR(15),
	INDEX utype_ind (user_type_id),
	CONSTRAINT fk_utype FOREIGN KEY (user_type_id)
	REFERENCES user_types(id)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);
CREATE TABLE IF NOT EXISTS contractors(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	user_id INT NOT NULL,
	color VARCHAR(7),
	INDEX c_user_ind (user_id),
	CONSTRAINT fk_c_user FOREIGN KEY (user_id)
	REFERENCES users(id)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);
CREATE TABLE IF NOT EXISTS project_managers(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	user_id INT NOT NULL,
	INDEX pm_user_ind (user_id),
	CONSTRAINT fk_pm_user FOREIGN KEY (user_id)
	REFERENCES users(id)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);
CREATE TABLE IF NOT EXISTS projects(
	id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	primary_marker_id INT NOT NULL,
	contractor_id INT NOT NULL,
	pm_id INT NOT NULL,
	title VARCHAR(20),
	start_date DATETIME,
	end_date DATETIME,
	INDEX p_marker_ind (primary_marker_id),
	INDEX c_ind (contractor_id),
	INDEX pm_ind (pm_id),
	CONSTRAINT fk_p_marker_id FOREIGN KEY (primary_marker_id)
	REFERENCES markers(id)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
	CONSTRAINT fk_c_id FOREIGN KEY (contractor_id)
	REFERENCES contractors(id)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
	CONSTRAINT fk_pm_id FOREIGN KEY (pm_id)
	REFERENCES project_managers(id)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);

INSERT INTO user_types (user_type)
VALUES('admin'),
('superadmin'),
('user');

INSERT INTO users (user_type_id, first_name, last_name, email, password, phone, cell)
VALUES (2, 'Miguel', 'Cabrera', 'syntacticsolutions@gmail.com', 'password',  '5555555555', '7777777777');

INSERT INTO contractors (user_id, color)
VALUES(1, '#3CD070');

INSERT INTO project_managers (user_id)
VALUES(1);

INSERT INTO marker_types (marker_type, svg)
VALUES('crane', '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve" width="512px" height="512px" class=""><g><path style="fill:{{}};" d="M0,256c0,141.397,114.603,256,256,256s256-114.603,256-256S397.397,0,256,0S0,114.613,0,256z" data-original="#EB86BF"/><path style="fill:{{}};" d="M507.659,303.093l-14.389-12.523l-89.376-89.376h-0.181c-1.417-1.746-3.543-2.761-5.792-2.763  h-39.787l-5.792-3.392l-52.075-52.107l0,0h-0.139c-1.232-2.597-3.845-4.257-6.72-4.267H99.136c-4.124,0-7.467,3.343-7.467,7.467  V198.4c0.006,2.879,1.666,5.498,4.267,6.731v0.128l11.467,13.131v29.568c-8.117,3.584-13.227,9.952-13.995,17.749  c-0.603,7.354,2.502,14.523,8.277,19.115v0.181l12.363,10.507H84.203c-4.124,0-7.467,3.343-7.467,7.467v37.333  c0.006,2.879,1.666,5.498,4.267,6.731l-0.075,0.075l18.688,18.752l142.517,145.76c4.579,0.242,9.202,0.366,13.867,0.373  C381.301,512,485.557,421.995,507.659,303.093z" data-original="#D670AD"/><g><path style="fill:#FFFFFF;" d="M435.2,272.32c-3.531-31.147-17.163-52.501-31.381-70.944c-1.414-1.837-3.601-2.913-5.92-2.912   h-89.632c-4.124,0-7.467,3.343-7.467,7.467l0,0v89.6h-14.933v-14.933c0-4.124-3.343-7.467-7.467-7.467h-14.933v-89.664h29.867   c4.124,0,7.467-3.343,7.467-7.467v-29.867c0-4.124-3.343-7.467-7.467-7.467H99.136c-4.124,0-7.467,3.343-7.467,7.467V198.4   c0,4.124,3.343,7.467,7.467,7.467h8.533c-0.238,0.759-0.361,1.551-0.363,2.347v39.744c-8.117,3.584-13.227,9.952-13.995,17.749   c-0.729,9.19,4.291,17.877,12.619,21.835c2.86,1.36,5.985,2.067,9.152,2.069c6.709,0,13.611-3.125,19.605-9.12   c2.916-2.916,2.916-7.644,0-10.56s-7.644-2.916-10.56,0c-4.267,4.267-8.437,5.685-11.808,4.107   c-2.627-1.251-4.253-3.951-4.128-6.859c0.395-4.064,5.44-5.92,8.405-6.656c3.323-0.832,5.653-3.818,5.653-7.243V208   c0.001-0.722-0.103-1.441-0.309-2.133h7.125c2.499,0.001,4.833-1.248,6.219-3.328l12.672-19.072h70.709v89.6h-14.933   c-4.124,0-7.467,3.343-7.467,7.467v14.933h-112c-4.124,0-7.467,3.343-7.467,7.467v37.333c0,4.124,3.343,7.467,7.467,7.467h27.648   c0,0.128,0,0.245,0,0.373c-0.054,12.371,9.93,22.444,22.301,22.499c10.883,0.048,20.226-7.733,22.147-18.446   c2.183,12.177,13.825,20.277,26.002,18.094c10.713-1.921,18.494-11.264,18.446-22.147c0-0.128,0-0.245,0-0.373H345.6   c0,12.371,10.029,22.4,22.4,22.4c12.371,0,22.4-10.029,22.4-22.4h37.333c4.124,0,7.467-3.343,7.467-7.467v-67.2   C435.213,272.818,435.213,272.569,435.2,272.32z M136.533,173.792l-11.467,17.205h-18.453V153.6h29.867L136.533,173.792z    M151.467,168.533V153.6h134.4v14.933H151.467z M248.533,183.467v89.6H233.6v-89.6H248.533z M211.2,288h59.733v7.467H211.2V288z    M134.261,355.595c-4.124,0-7.467-3.343-7.467-7.467c0-4.124,3.343-7.467,7.467-7.467c4.124,0,7.467,3.343,7.467,7.467l0,0   c0.053,4.124-3.247,7.509-7.37,7.562c-0.036,0-0.071,0.001-0.108,0.001L134.261,355.595z M178.336,355.595   c-4.124,0-7.467-3.343-7.467-7.467c0-4.124,3.343-7.467,7.467-7.467s7.467,3.343,7.467,7.467c0.053,4.124-3.247,7.509-7.37,7.562   c-0.039,0-0.079,0.001-0.118,0.001L178.336,355.595z M300.8,332.907H194.656c-8.447-9.039-22.622-9.518-31.661-1.071   c-3.511,3.282-5.875,7.606-6.739,12.335c-2.226-12.17-13.895-20.229-26.065-18.003c-4.729,0.865-9.053,3.228-12.335,6.739H91.669   v-22.4H300.8V332.907z M375.467,213.44h18.709c11.936,15.883,22.955,34.272,26.037,59.733h-44.747V213.44z M368,355.36   c-4.124,0-7.467-3.343-7.467-7.467c0-4.124,3.343-7.467,7.467-7.467c4.124,0,7.467,3.343,7.467,7.467   c-0.023,4.107-3.36,7.424-7.467,7.424V355.36z M420.267,303.093H412.8c-4.124,0-7.467,3.343-7.467,7.467   c0,4.124,3.343,7.467,7.467,7.467h7.467v14.933h-35.637c-8.097-9.157-22.084-10.017-31.243-1.92   c-0.678,0.601-1.321,1.242-1.92,1.92h-35.733V213.493h44.8v67.2c0,4.124,3.343,7.467,7.467,7.467h52.267V303.093z" data-original="#FFFFFF"/><path style="fill:#FFFFFF;" d="M338.133,250.741c-4.124,0-7.467,3.343-7.467,7.467v44.8c0,4.124,3.343,7.467,7.467,7.467   c4.124,0,7.467-3.343,7.467-7.467v-44.8C345.6,254.084,342.257,250.741,338.133,250.741z" data-original="#FFFFFF"/></g></g> </svg>'),
('tool_shed', '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve" width="512px" height="512px" class=""><g><path style="{{}}" d="M0,256c0,141.397,114.603,256,256,256s256-114.603,256-256S397.397,0,256,0S0,114.613,0,256z" data-original="#FA6E51" class=""/><path style="{{}}" d="M512,256c0-6.4-0.235-12.75-0.704-19.051l-15.019-15.552l-26.048-26.048l-48.544-48.448  l-37.216-37.216l-4.043-4.085c-0.628-1.273-1.649-2.308-2.912-2.955l-0.469-0.48l-0.128,0.192  c-30.307-12.759-65.22,1.467-77.979,31.774c-5.631,13.376-6.183,28.349-1.552,42.103l-45.653,45.632l-0.309,0.149L132.363,102.933  v0.267c-5.253-4.855-13.375-4.79-18.549,0.149l-10.496,10.496c-5.156,5.17-5.156,13.539,0,18.709l33.355,33.355v0.245l85.387,85.387  l-45.867,45.867c-31.177-10.437-64.912,6.374-75.35,37.552c-4.588,13.705-4.034,28.61,1.558,41.936l0,0l-0.139,0.117l0.459,0.448  c0.62,1.267,1.629,2.303,2.88,2.955l4.096,4.043l126.539,126.549l0.395,0.267c6.4,0.477,12.857,0.718,19.371,0.725  C397.397,512,512,397.397,512,256z M351.104,143.243l-0.309-0.309l1.483-1.547L351.104,143.243z" data-original="#E8573F" class=""/><path style="fill:#FFFFFF;" d="M406.571,369.152l-86.955-86.965c-2.582-2.583-6.769-2.585-9.353-0.002  c-0.001,0.001-0.001,0.001-0.002,0.002l-9.355,9.355l-21.984-21.984l55.904-55.904c21.429,7.282,45.134,1.728,61.099-14.315  c17.312-17.301,22.176-41.963,12.693-64.352c-1.418-3.366-5.295-4.946-8.661-3.529c-0.711,0.3-1.364,0.721-1.931,1.246  l-29.867,27.627l-17.365-17.397l28.48-29.867c2.524-2.649,2.422-6.842-0.227-9.365c-0.577-0.549-1.248-0.991-1.981-1.301  c-30.273-12.842-65.223,1.29-78.065,31.563c-5.69,13.412-6.263,28.444-1.615,42.251l-55.893,55.904l-79.168-79.168l5.248-5.248  c2.583-2.582,2.585-6.769,0.002-9.353c-0.001-0.001-0.001-0.001-0.002-0.002l-35.029-34.997c-5.236-5.005-13.484-5.005-18.72,0  l-10.496,10.496c-5.156,5.17-5.156,13.539,0,18.709l35.019,35.019c2.582,2.583,6.769,2.585,9.353,0.002  c0.001-0.001,0.001-0.001,0.002-0.002l5.248-5.248l79.168,79.168l-55.904,55.915c-31.157-10.495-64.924,6.256-75.419,37.413  c-4.649,13.801-4.078,28.827,1.605,42.235c1.419,3.365,5.298,4.943,8.663,3.524c0.742-0.313,1.422-0.759,2.003-1.316l29.867-28.469  l17.397,17.397l-27.616,29.867c-2.483,2.678-2.326,6.863,0.352,9.346c0.566,0.525,1.219,0.946,1.931,1.246  c29.979,12.719,64.593-1.273,77.312-31.252c5.738-13.523,6.221-28.701,1.355-42.561l55.904-55.904l21.984,21.984l-9.355,9.355  c-2.583,2.582-2.585,6.769-0.002,9.353c0.001,0.001,0.001,0.001,0.002,0.002l86.965,86.976l0,0  c4.955,4.972,11.691,7.756,18.709,7.733c7.025,0.063,13.775-2.733,18.699-7.744c10.336-10.317,10.351-27.059,0.034-37.395  c-0.012-0.012-0.022-0.022-0.034-0.034L406.571,369.152z M143.04,153.536l-30.347-30.347l10.496-10.496l30.347,30.347  L143.04,153.536z M309.771,182.56c1.906-1.903,2.467-4.772,1.419-7.253c-9.988-23.541,0.998-50.723,24.54-60.711  c8.381-3.556,17.625-4.562,26.575-2.894l-25.536,26.773c-2.484,2.599-2.437,6.707,0.107,9.248l26.464,26.464  c2.512,2.516,6.564,2.596,9.173,0.181l26.805-24.811c2.816,14.762-1.973,29.95-12.747,40.427  c-13.325,13.383-33.459,17.296-50.827,9.877c-2.481-1.052-5.351-0.49-7.253,1.419l-58.933,58.933l-18.709-18.72L309.771,182.56z   M201.269,328.533c-1.906,1.903-2.467,4.772-1.419,7.253c7.467,17.685,3.808,37.632-9.387,50.827  c-10.682,10.755-25.996,15.524-40.896,12.736l24.789-26.795c2.415-2.609,2.335-6.661-0.181-9.173l-26.464-26.464  c-2.539-2.549-6.651-2.596-9.248-0.107l-26.773,25.536c-4.675-25.142,11.916-49.314,37.058-53.989  c8.942-1.663,18.175-0.656,26.547,2.896c2.481,1.045,5.348,0.484,7.253-1.419l58.923-58.933l18.72,18.72L201.269,328.533z   M397.205,397.269c-2.465,2.485-5.822,3.879-9.323,3.872l0,0c-3.508,0.014-6.877-1.377-9.355-3.861l-81.355-81.397l18.72-18.72  l81.333,81.344c5.169,5.153,5.183,13.521,0.03,18.69c-0.01,0.01-0.02,0.02-0.03,0.03L397.205,397.269z" data-original="#FFFFFF" class=""/></g> </svg>'),
('project_location', '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve" width="512px" height="512px" class=""><g><path style="fill:{{}};" d="M512,256.006C512,397.402,397.394,512.004,256.004,512C114.606,512.004,0,397.402,0,256.006  C-0.007,114.61,114.606,0,256.004,0C397.394,0,512,114.614,512,256.006z" data-original="#9ED368" class=""/><path style="fill:{{}}" d="M511.279,274.273c-0.028-0.029-0.058-0.055-0.085-0.085c-0.477-0.516-167.49-167.468-167.975-167.975  C320.898,82.064,290.043,67.093,256,67.093c-67.933,0-123.2,59.586-123.2,132.829c0,70.556,111.67,234.469,116.422,241.411  c0.314,0.458,0.815,0.695,1.205,1.073c0.084,0.124,0.226,0.332,0.282,0.413c0.314,0.458,0.815,0.695,1.205,1.073  c0.084,0.124,60.556,60.569,60.946,60.946c0.084,0.125,0.226,0.332,0.282,0.414c0.063,0.091,0.164,0.137,0.239,0.213  C421.379,480.73,503.271,387.742,511.279,274.273z" data-original="#8BC052" class=""/><g><path style="fill:#F4F6F9" d="M256,67.093c-67.933,0-123.2,59.587-123.2,132.829c0,70.556,111.67,234.469,116.422,241.411   c1.532,2.238,4.066,3.573,6.778,3.573c2.711,0,5.246-1.335,6.778-3.573C267.53,434.391,379.2,270.478,379.2,199.922   C379.2,126.681,323.933,67.093,256,67.093z M256,421.915c-24.48-37.085-106.773-165.931-106.773-221.993   C149.227,135.74,197.123,83.52,256,83.52s106.773,52.22,106.773,116.402C362.773,255.968,280.471,384.838,256,421.915z" data-original="#F4F6F9" class="active-path"/><path style="fill:#F4F6F9" d="M256,124.587c-36.23,0-65.707,29.476-65.707,65.707S219.77,256,256,256s65.707-29.476,65.707-65.707   S292.23,124.587,256,124.587z M256,239.573c-27.174,0-49.28-22.106-49.28-49.28s22.106-49.28,49.28-49.28   c27.174,0,49.28,22.106,49.28,49.28S283.174,239.573,256,239.573z" data-original="#F4F6F9" class="active-path"/></g></g> </svg>');
--FIND OUT WHY THESE ARE ESCAPING AND CAUSING AN ERROR

INSERT INTO markers (type_id, lat, lng, start_date, end_date, info)
VALUES (1, -121.289255, 38.761576, null, null, "Crane"),
(3, -121.289673, 38.762003, null, null, "Project Location"),
(2, -121.290381, 38.762497, null, null, "tool_shed");

INSERT INTO projects (primary_marker_id, contractor_id, pm_id, title, start_date, end_date)
VALUES(3, 1, 1, "Golf Course Rebuild", null, null)